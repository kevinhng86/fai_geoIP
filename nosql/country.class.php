<?php
function getCountryCodeOrName ($input) {	
	$nameToIso = array(
		"afghanistan" => "AF", 
		"aland islands" => "AX", 
		"albania" => "AL", 
		"algeria" => "DZ", 
		"american samoa" => "AS", 
		"andorra" => "AD", 
		"angola" => "AO", 
		"anguilla" => "AI", 
		"antarctica" => "AQ", 
		"antigua and barbuda" => "AG", 
		"argentina" => "AR", 
		"armenia" => "AM", 
		"aruba" => "AW", 
		"australia" => "AU", 
		"austria" => "AT", 
		"azerbaijan" => "AZ", 
		"bahamas" => "BS", 
		"bahrain" => "BH", 
		"bangladesh" => "BD", 
		"barbados" => "BB", 
		"belarus" => "BY", 
		"belgium" => "BE", 
		"belize" => "BZ", 
		"benin" => "BJ", 
		"bermuda" => "BM", 
		"bhutan" => "BT", 
		"bolivia" => "BO", 
		"bosnia and herzegovina" => "BA", 
		"botswana" => "BW", 
		"bouvet island" => "BV", 
		"brazil" => "BR", 
		"british indian ocean territory" => "IO", 
		"brunei darussalam" => "BN", 
		"bulgaria" => "BG", 
		"burkina faso" => "BF", 
		"burundi" => "BI", 
		"cambodia" => "KH", 
		"cameroon" => "CM", 
		"canada" => "CA", 
		"cape verde" => "CV", 
		"cayman islands" => "KY", 
		"central african republic" => "CF", 
		"chad" => "TD", 
		"chile" => "CL", 
		"china" => "CN", 
		"christmas island" => "CX", 
		"cocos (keeling) islands" => "CC", 
		"colombia" => "CO", 
		"comoros" => "KM", 
		"congo" => "CG", 
		"congo, democratic republic" => "CD", 
		"cook islands" => "CK", 
		"costa rica" => "CR", 
		"cote d'ivoire" => "CI", 
		"croatia" => "HR", 
		"cuba" => "CU", 
		"cyprus" => "CY", 
		"czech republic" => "CZ", 
		"denmark" => "DK", 
		"djibouti" => "DJ", 
		"dominica" => "DM", 
		"dominican republic" => "DO", 
		"ecuador" => "EC", 
		"egypt" => "EG", 
		"el salvador" => "SV", 
		"equatorial guinea" => "GQ", 
		"eritrea" => "ER", 
		"estonia" => "EE", 
		"ethiopia" => "ET", 
		"falkland islands (malvinas)" => "FK", 
		"faroe islands" => "FO", 
		"fiji" => "FJ", 
		"finland" => "FI", 
		"france" => "FR", 
		"french guiana" => "GF", 
		"french polynesia" => "PF", 
		"french southern territories" => "TF", 
		"gabon" => "GA", 
		"gambia" => "GM", 
		"georgia" => "GE", 
		"germany" => "DE", 
		"ghana" => "GH", 
		"gibraltar" => "GI", 
		"greece" => "GR", 
		"greenland" => "GL", 
		"grenada" => "GD", 
		"guadeloupe" => "GP", 
		"guam" => "GU", 
		"guatemala" => "GT", 
		"guernsey" => "GG", 
		"guinea" => "GN", 
		"guinea-bissau" => "GW", 
		"guyana" => "GY", 
		"haiti" => "HT", 
		"heard island & mcdonald islands" => "HM", 
		"holy see (vatican city state)" => "VA", 
		"honduras" => "HN", 
		"hong kong" => "HK", 
		"hungary" => "HU", 
		"iceland" => "IS", 
		"india" => "IN", 
		"indonesia" => "ID", 
		"iran, islamic republic of" => "IR", 
		"iraq" => "IQ", 
		"ireland" => "IE", 
		"isle of man" => "IM", 
		"israel" => "IL", 
		"italy" => "IT", 
		"jamaica" => "JM", 
		"japan" => "JP", 
		"jersey" => "JE", 
		"jordan" => "JO", 
		"kazakhstan" => "KZ", 
		"kenya" => "KE", 
		"kiribati" => "KI", 
		"korea" => "KR", 
		"kuwait" => "KW", 
		"kyrgyzstan" => "KG", 
		"lao people's democratic republic" => "LA", 
		"latvia" => "LV", 
		"lebanon" => "LB", 
		"lesotho" => "LS", 
		"liberia" => "LR", 
		"libyan arab jamahiriya" => "LY", 
		"liechtenstein" => "LI", 
		"lithuania" => "LT", 
		"luxembourg" => "LU", 
		"macao" => "MO", 
		"macedonia" => "MK", 
		"madagascar" => "MG", 
		"malawi" => "MW", 
		"malaysia" => "MY", 
		"maldives" => "MV", 
		"mali" => "ML", 
		"malta" => "MT", 
		"marshall islands" => "MH", 
		"martinique" => "MQ", 
		"mauritania" => "MR", 
		"mauritius" => "MU", 
		"mayotte" => "YT", 
		"mexico" => "MX", 
		"micronesia, federated states of" => "FM", 
		"moldova" => "MD", 
		"monaco" => "MC", 
		"mongolia" => "MN", 
		"montenegro" => "ME", 
		"montserrat" => "MS", 
		"morocco" => "MA", 
		"mozambique" => "MZ", 
		"myanmar" => "MM", 
		"namibia" => "NA", 
		"nauru" => "NR", 
		"nepal" => "NP", 
		"netherlands" => "NL", 
		"netherlands antilles" => "AN", 
		"new caledonia" => "NC", 
		"new zealand" => "NZ", 
		"nicaragua" => "NI", 
		"niger" => "NE", 
		"nigeria" => "NG", 
		"niue" => "NU", 
		"norfolk island" => "NF", 
		"northern mariana islands" => "MP", 
		"norway" => "NO", 
		"oman" => "OM", 
		"pakistan" => "PK", 
		"palau" => "PW", 
		"palestinian territory, occupied" => "PS", 
		"panama" => "PA", 
		"papua new guinea" => "PG", 
		"paraguay" => "PY", 
		"peru" => "PE", 
		"philippines" => "PH", 
		"pitcairn" => "PN", 
		"poland" => "PL", 
		"portugal" => "PT", 
		"puerto rico" => "PR", 
		"qatar" => "QA", 
		"reunion" => "RE", 
		"romania" => "RO", 
		"russian federation" => "RU", 
		"rwanda" => "RW", 
		"saint barthelemy" => "BL", 
		"saint helena" => "SH", 
		"saint kitts and nevis" => "KN", 
		"saint lucia" => "LC", 
		"saint martin" => "MF", 
		"saint pierre and miquelon" => "PM", 
		"saint vincent and grenadines" => "VC", 
		"samoa" => "WS", 
		"san marino" => "SM", 
		"sao tome and principe" => "ST", 
		"saudi arabia" => "SA", 
		"senegal" => "SN", 
		"serbia" => "RS", 
		"seychelles" => "SC", 
		"sierra leone" => "SL", 
		"singapore" => "SG", 
		"slovakia" => "SK", 
		"slovenia" => "SI", 
		"solomon islands" => "SB", 
		"somalia" => "SO", 
		"south africa" => "ZA", 
		"south georgia and sandwich isl." => "GS", 
		"spain" => "ES", 
		"sri lanka" => "LK", 
		"sudan" => "SD", 
		"suriname" => "SR", 
		"svalbard and jan mayen" => "SJ", 
		"swaziland" => "SZ", 
		"sweden" => "SE", 
		"switzerland" => "CH", 
		"syrian arab republic" => "SY", 
		"taiwan" => "TW", 
		"tajikistan" => "TJ", 
		"tanzania" => "TZ", 
		"thailand" => "TH", 
		"timor-leste" => "TL", 
		"togo" => "TG", 
		"tokelau" => "TK", 
		"tonga" => "TO", 
		"trinidad and tobago" => "TT", 
		"tunisia" => "TN", 
		"turkey" => "TR", 
		"turkmenistan" => "TM", 
		"turks and caicos islands" => "TC", 
		"tuvalu" => "TV", 
		"uganda" => "UG", 
		"ukraine" => "UA", 
		"united arab emirates" => "AE", 
		"united kingdom" => "GB", 
		"united states" => "US", 
		"united states outlying islands" => "UM", 
		"uruguay" => "UY", 
		"uzbekistan" => "UZ", 
		"vanuatu" => "VU", 
		"venezuela" => "VE", 
		"viet nam" => "VN", 
		"virgin islands, british" => "VG", 
		"virgin islands, u.s." => "VI", 
		"wallis and futuna" => "WF", 
		"western sahara" => "EH", 
		"yemen" => "YE", 
		"zambia" => "ZM", 
		"zimbabwe" => "ZW", 
		);

	$isoToName = array(
		"af" => "Afghanistan", 
		"ax" => "Aland Islands", 
		"al" => "Albania", 
		"dz" => "Algeria", 
		"as" => "American Samoa", 
		"ad" => "Andorra", 
		"ao" => "Angola", 
		"ai" => "Anguilla", 
		"aq" => "Antarctica", 
		"ag" => "Antigua And Barbuda", 
		"ar" => "Argentina", 
		"am" => "Armenia", 
		"aw" => "Aruba", 
		"au" => "Australia", 
		"at" => "Austria", 
		"az" => "Azerbaijan", 
		"bs" => "Bahamas", 
		"bh" => "Bahrain", 
		"bd" => "Bangladesh", 
		"bb" => "Barbados", 
		"by" => "Belarus", 
		"be" => "Belgium", 
		"bz" => "Belize", 
		"bj" => "Benin", 
		"bm" => "Bermuda", 
		"bt" => "Bhutan", 
		"bo" => "Bolivia", 
		"ba" => "Bosnia And Herzegovina", 
		"bw" => "Botswana", 
		"bv" => "Bouvet Island", 
		"br" => "Brazil", 
		"io" => "British Indian Ocean Territory", 
		"bn" => "Brunei Darussalam", 
		"bg" => "Bulgaria", 
		"bf" => "Burkina Faso", 
		"bi" => "Burundi", 
		"kh" => "Cambodia", 
		"cm" => "Cameroon", 
		"ca" => "Canada", 
		"cv" => "Cape Verde", 
		"ky" => "Cayman Islands", 
		"cf" => "Central African Republic", 
		"td" => "Chad", 
		"cl" => "Chile", 
		"cn" => "China", 
		"cx" => "Christmas Island", 
		"cc" => "Cocos (Keeling) Islands", 
		"co" => "Colombia", 
		"km" => "Comoros", 
		"cg" => "Congo", 
		"cd" => "Congo, Democratic Republic", 
		"ck" => "Cook Islands", 
		"cr" => "Costa Rica", 
		"ci" => "Cote D'Ivoire", 
		"hr" => "Croatia", 
		"cu" => "Cuba", 
		"cy" => "Cyprus", 
		"cz" => "Czech Republic", 
		"dk" => "Denmark", 
		"dj" => "Djibouti", 
		"dm" => "Dominica", 
		"do" => "Dominican Republic", 
		"ec" => "Ecuador", 
		"eg" => "Egypt", 
		"sv" => "El Salvador", 
		"gq" => "Equatorial Guinea", 
		"er" => "Eritrea", 
		"ee" => "Estonia", 
		"et" => "Ethiopia", 
		"fk" => "Falkland Islands (Malvinas)", 
		"fo" => "Faroe Islands", 
		"fj" => "Fiji", 
		"fi" => "Finland", 
		"fr" => "France", 
		"gf" => "French Guiana", 
		"pf" => "French Polynesia", 
		"tf" => "French Southern Territories", 
		"ga" => "Gabon", 
		"gm" => "Gambia", 
		"ge" => "Georgia", 
		"de" => "Germany", 
		"gh" => "Ghana", 
		"gi" => "Gibraltar", 
		"gr" => "Greece", 
		"gl" => "Greenland", 
		"gd" => "Grenada", 
		"gp" => "Guadeloupe", 
		"gu" => "Guam", 
		"gt" => "Guatemala", 
		"gg" => "Guernsey", 
		"gn" => "Guinea", 
		"gw" => "Guinea-Bissau", 
		"gy" => "Guyana", 
		"ht" => "Haiti", 
		"hm" => "Heard Island & Mcdonald Islands", 
		"va" => "Holy See (Vatican City State)", 
		"hn" => "Honduras", 
		"hk" => "Hong Kong", 
		"hu" => "Hungary", 
		"is" => "Iceland", 
		"in" => "India", 
		"id" => "Indonesia", 
		"ir" => "Iran, Islamic Republic Of", 
		"iq" => "Iraq", 
		"ie" => "Ireland", 
		"im" => "Isle Of Man", 
		"il" => "Israel", 
		"it" => "Italy", 
		"jm" => "Jamaica", 
		"jp" => "Japan", 
		"je" => "Jersey", 
		"jo" => "Jordan", 
		"kz" => "Kazakhstan", 
		"ke" => "Kenya", 
		"ki" => "Kiribati", 
		"kr" => "Korea", 
		"kw" => "Kuwait", 
		"kg" => "Kyrgyzstan", 
		"la" => "Lao People's Democratic Republic", 
		"lv" => "Latvia", 
		"lb" => "Lebanon", 
		"ls" => "Lesotho", 
		"lr" => "Liberia", 
		"ly" => "Libyan Arab Jamahiriya", 
		"li" => "Liechtenstein", 
		"lt" => "Lithuania", 
		"lu" => "Luxembourg", 
		"mo" => "Macao", 
		"mk" => "Macedonia", 
		"mg" => "Madagascar", 
		"mw" => "Malawi", 
		"my" => "Malaysia", 
		"mv" => "Maldives", 
		"ml" => "Mali", 
		"mt" => "Malta", 
		"mh" => "Marshall Islands", 
		"mq" => "Martinique", 
		"mr" => "Mauritania", 
		"mu" => "Mauritius", 
		"yt" => "Mayotte", 
		"mx" => "Mexico", 
		"fm" => "Micronesia, Federated States Of", 
		"md" => "Moldova", 
		"mc" => "Monaco", 
		"mn" => "Mongolia", 
		"me" => "Montenegro", 
		"ms" => "Montserrat", 
		"ma" => "Morocco", 
		"mz" => "Mozambique", 
		"mm" => "Myanmar", 
		"na" => "Namibia", 
		"nr" => "Nauru", 
		"np" => "Nepal", 
		"nl" => "Netherlands", 
		"an" => "Netherlands Antilles", 
		"nc" => "New Caledonia", 
		"nz" => "New Zealand", 
		"ni" => "Nicaragua", 
		"ne" => "Niger", 
		"ng" => "Nigeria", 
		"nu" => "Niue", 
		"nf" => "Norfolk Island", 
		"mp" => "Northern Mariana Islands", 
		"no" => "Norway", 
		"om" => "Oman", 
		"pk" => "Pakistan", 
		"pw" => "Palau", 
		"ps" => "Palestinian Territory, Occupied", 
		"pa" => "Panama", 
		"pg" => "Papua New Guinea", 
		"py" => "Paraguay", 
		"pe" => "Peru", 
		"ph" => "Philippines", 
		"pn" => "Pitcairn", 
		"pl" => "Poland", 
		"pt" => "Portugal", 
		"pr" => "Puerto Rico", 
		"qa" => "Qatar", 
		"re" => "Reunion", 
		"ro" => "Romania", 
		"ru" => "Russian Federation", 
		"rw" => "Rwanda", 
		"bl" => "Saint Barthelemy", 
		"sh" => "Saint Helena", 
		"kn" => "Saint Kitts And Nevis", 
		"lc" => "Saint Lucia", 
		"mf" => "Saint Martin", 
		"pm" => "Saint Pierre And Miquelon", 
		"vc" => "Saint Vincent And Grenadines", 
		"ws" => "Samoa", 
		"sm" => "San Marino", 
		"st" => "Sao Tome And Principe", 
		"sa" => "Saudi Arabia", 
		"sn" => "Senegal", 
		"rs" => "Serbia", 
		"sc" => "Seychelles", 
		"sl" => "Sierra Leone", 
		"sg" => "Singapore", 
		"sk" => "Slovakia", 
		"si" => "Slovenia", 
		"sb" => "Solomon Islands", 
		"so" => "Somalia", 
		"za" => "South Africa", 
		"gs" => "South Georgia And Sandwich Isl.", 
		"es" => "Spain", 
		"lk" => "Sri Lanka", 
		"sd" => "Sudan", 
		"sr" => "Suriname", 
		"sj" => "Svalbard And Jan Mayen", 
		"sz" => "Swaziland", 
		"se" => "Sweden", 
		"ch" => "Switzerland", 
		"sy" => "Syrian Arab Republic", 
		"tw" => "Taiwan", 
		"tj" => "Tajikistan", 
		"tz" => "Tanzania", 
		"th" => "Thailand", 
		"tl" => "Timor-Leste", 
		"tg" => "Togo", 
		"tk" => "Tokelau", 
		"to" => "Tonga", 
		"tt" => "Trinidad And Tobago", 
		"tn" => "Tunisia", 
		"tr" => "Turkey", 
		"tm" => "Turkmenistan", 
		"tc" => "Turks And Caicos Islands", 
		"tv" => "Tuvalu", 
		"ug" => "Uganda", 
		"ua" => "Ukraine", 
		"ae" => "United Arab Emirates", 
		"gb" => "United Kingdom", 
		"us" => "United States", 
		"um" => "United States Outlying Islands", 
		"uy" => "Uruguay", 
		"uz" => "Uzbekistan", 
		"vu" => "Vanuatu", 
		"ve" => "Venezuela", 
		"vn" => "Viet Nam", 
		"vg" => "Virgin Islands, British", 
		"vi" => "Virgin Islands, U.S.", 
		"wf" => "Wallis And Futuna", 
		"eh" => "Western Sahara", 
		"ye" => "Yemen", 
		"zm" => "Zambia", 
		"zw" => "Zimbabwe", 
		);		
		
		

	$errorCode = "";

	if ( !isset($input) || !is_string($input) ) $errorCode = -5555;
	$inlen = strlen($input) ;
	if ( $inlen < 2 || !preg_match("/[\w\s\d]+/i", $input) ) $errorCode = -5555;	
	if ($errorCode === -5555) return array($errorCode,$input, "ErrorCode $errorCode: Unsupported Data, return input value in array 1");

	if ($inlen == 2){
		$output = strtolower($input);
		return (isset($isoToName[$output])? 
			array($isoToName[$output], $input) : 
			array(-1, $input, "Can't find the country code for the input value.")
			);
	}
	
	if ($inlen > 2) {
		$output = strtolower($input);
		return (isset($nameToIso[$output])? 
			array($nameToIso[$output], $input) : 
			array(-1, $input, "Can't find the country code for the input value.")
   		       );
	}
}
?>
